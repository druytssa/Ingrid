<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Ingrid TTS Control</title>
  <style>
    body {
      background-color: #1e1e1e;
      color: #ffffff;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      margin: 0;
      padding: 12px;
      display: flex;
      flex-direction: column;
      width: 560px; /* ~2x wider */
      min-height: 340px;
    }
    button {
      background: none;
      border: none;
      cursor: pointer;
      margin: 10px;
      padding: 10px;
    }
    button img {
      width: 24px;
      height: 24px;
    }
    .top-controls {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 10px;
    }
    .spacer { flex: 1 1 auto; }
    .row { display: flex; gap: 8px; align-items: center; }
    .hint { font-size: 12px; opacity: .7; }
    #log { margin-top: 8px; max-height: 200px; overflow: auto; background: #121212; border: 1px solid #2a2a2a; padding: 8px; border-radius: 8px; }
  </style>
</head>
<body>
  <div class="top-controls">
    <div class="row">
      <button id="playBtn" title="Play"><img src="play_icon.png" alt="Play"></button>
      <button id="pauseBtn" title="Pause"><img src="pause_icon.png" alt="Pause"></button>
      <button id="replayBtn" title="Replay 10s"><img src="replay_icon.png" alt="Replay 10s"></button>
    </div>
    <div class="spacer"></div>
    <div class="hint">Shortcuts: Ctrl+Shift+Space · Ctrl+Shift+Left/Right</div>
  </div>

  <!-- OpenAI Mode -->
  <div class="panel">
    <label>
      <input type="checkbox" id="useOpenAi">
      Use OpenAI TTS (online)
    </label>
    <div class="row">
      <input type="password" id="apiKey" placeholder="OpenAI API key">
      <select id="oaVoice">
        <option value="alloy">alloy</option>
        <option value="verse">verse</option>
        <option value="aria">aria</option>
      </select>
    </div>
  </div>

  <!-- Local Voice Settings -->
  <div class="panel">
    <div class="row">
      <label>Speed: <span id="rateVal">1.0×</span></label>
      <input type="range" id="rateInput" min="0.5" max="2.0" step="0.1" value="1.0">
    </div>
    <div class="row">
      <label>Voice:</label>
      <select id="voiceSelect"></select>
      <label>
        <input type="checkbox" id="preferLocalCheckbox" checked>
        Prefer local voices
      </label>
    </div>
  </div>

  <!-- Status & Log -->
  <div id="spinner" style="display:none; margin-top: 6px;">
    <svg width="24" height="24" viewBox="0 0 38 38" xmlns="http://www.w3.org/2000/svg" stroke="#fff">
      <g fill="none" fill-rule="evenodd">
        <g transform="translate(1 1)" stroke-width="2">
          <circle stroke-opacity=".2" cx="18" cy="18" r="18"/>
          <path d="M36 18c0-9.94-8.06-18-18-18">
            <animateTransform 
              attributeName="transform" 
              type="rotate" 
              from="0 18 18" 
              to="360 18 18" 
              dur="1s" 
              repeatCount="indefinite"/>
          </path>
        </g>
      </g>
    </svg>
  </div>
  <div id="statusText"></div>
  <div id="log" style="display:none"></div>

  <script src="popup.js"></script>
</body>
</html>
